<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üìä –î–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–∫–∞–∑–æ–≤ + –¢–µ—Ö–ø—Ä–æ—Ü–µ—Å—Å—ã</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
--primary: #6366f1;
--primary-dark: #4f46e5;
--primary-light: #818cf8;
--success: #10b981;
--success-light: #34d399;
--warning: #f59e0b;
--warning-light: #fbbf24;
--danger: #ef4444;
--danger-light: #f87171;
--info: #06b6d4;
--info-light: #22d3ee;
--bg-primary: #f8fafc;
--bg-secondary: #ffffff;
--bg-tertiary: #f1f5f9;
--text-primary: #1e293b;
--text-secondary: #64748b;
--text-tertiary: #94a3b8;
--border: #e2e8f0;
--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
--shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
--transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
--radius: 16px;
--radius-lg: 24px;
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
body {
font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
background: linear-gradient(135deg, var(--bg-primary) 0%, #eef2ff 100%);
color: var(--text-primary);
line-height: 1.6;
min-height: 100vh;
padding-bottom: 40px;
}
.container {
max-width: 1600px;
margin: 0 auto;
padding: 24px;
}
/* === Tabs === */
.tabs {
display: flex;
gap: 8px;
margin-bottom: 24px;
border-bottom: 2px solid var(--border);
padding-bottom: 0;
}
.tab {
padding: 12px 24px;
background: none;
border: none;
color: var(--text-secondary);
font-size: 1rem;
font-weight: 500;
cursor: pointer;
border-bottom: 3px solid transparent;
margin-bottom: -2px;
transition: var(--transition);
display: flex;
align-items: center;
gap: 8px;
}
.tab:hover {
color: var(--primary);
}
.tab.active {
color: var(--primary);
border-bottom-color: var(--primary);
}
.tab-content {
display: none;
}
.tab-content.active {
display: block;
animation: fadeIn 0.3s ease-out;
}
@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}
/* === Cutting Map === */
.cutting-section {
background: var(--bg-secondary);
border-radius: var(--radius);
box-shadow: var(--shadow);
padding: 24px;
margin-bottom: 24px;
border: 1px solid var(--border);
}
.cutting-section h2 {
font-size: 1.2rem;
font-weight: 600;
margin-bottom: 20px;
display: flex;
align-items: center;
gap: 10px;
}
.cutting-controls {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 16px;
margin-bottom: 24px;
padding: 20px;
background: var(--bg-tertiary);
border-radius: 12px;
}
.control-group {
display: flex;
flex-direction: column;
gap: 6px;
}
.control-group label {
font-size: 0.9rem;
font-weight: 500;
color: var(--text-secondary);
}
.control-group input {
padding: 10px 14px;
border: 2px solid var(--border);
border-radius: 8px;
font-size: 0.95rem;
background: var(--bg-secondary);
color: var(--text-primary);
transition: var(--transition);
}
.control-group input:focus {
outline: none;
border-color: var(--primary);
box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}
.add-part-btn {
background: linear-gradient(135deg, var(--success), #059669);
color: white;
border: none;
padding: 12px 24px;
border-radius: 10px;
cursor: pointer;
font-weight: 500;
display: inline-flex;
align-items: center;
gap: 8px;
transition: var(--transition);
box-shadow: var(--shadow);
}
.add-part-btn:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-lg);
}
.cutting-workspace {
display: grid;
grid-template-columns: 1fr 350px;
gap: 24px;
}
.cutting-canvas-container {
background: var(--bg-tertiary);
border-radius: 12px;
padding: 20px;
overflow: auto;
min-height: 600px;
position: relative;
}
.cutting-canvas {
background: white;
border: 2px solid var(--border);
position: relative;
margin: 0 auto;
box-shadow: var(--shadow);
}
.cutting-part {
position: absolute;
background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(99, 102, 241, 0.1));
border: 2px solid var(--primary);
cursor: move;
display: flex;
align-items: center;
justify-content: center;
font-size: 0.85rem;
font-weight: 600;
color: var(--primary-dark);
overflow: hidden;
transition: box-shadow 0.2s;
user-select: none;
}
.cutting-part:hover {
box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
z-index: 10;
}
.cutting-part .part-dims {
position: absolute;
bottom: 2px;
right: 4px;
font-size: 0.75rem;
color: var(--text-secondary);
}
.cutting-part .part-number {
font-weight: 700;
}
.cutting-sidebar {
display: flex;
flex-direction: column;
gap: 16px;
}
.parts-list {
background: var(--bg-tertiary);
border-radius: 12px;
padding: 16px;
max-height: 400px;
overflow-y: auto;
}
.parts-list h3 {
font-size: 1rem;
margin-bottom: 12px;
display: flex;
align-items: center;
gap: 8px;
}
.part-item {
background: var(--bg-secondary);
border: 1px solid var(--border);
border-radius: 8px;
padding: 12px;
margin-bottom: 8px;
display: flex;
justify-content: space-between;
align-items: center;
gap: 12px;
}
.part-item-info {
flex: 1;
}
.part-item-dims {
font-weight: 600;
color: var(--primary);
font-size: 0.9rem;
}
.part-item-qty {
color: var(--text-secondary);
font-size: 0.85rem;
}
.part-item-actions {
display: flex;
gap: 6px;
}
.btn-small {
width: 28px;
height: 28px;
border: none;
border-radius: 6px;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
transition: var(--transition);
font-size: 12px;
}
.btn-danger {
background: rgba(239, 68, 68, 0.1);
color: var(--danger);
}
.btn-danger:hover {
background: var(--danger);
color: white;
}
.stats-panel {
background: var(--bg-tertiary);
border-radius: 12px;
padding: 16px;
}
.stats-panel h3 {
font-size: 1rem;
margin-bottom: 12px;
display: flex;
align-items: center;
gap: 8px;
}
.stat-row {
display: flex;
justify-content: space-between;
padding: 8px 0;
border-bottom: 1px solid var(--border);
font-size: 0.9rem;
}
.stat-row:last-child {
border-bottom: none;
}
.stat-label {
color: var(--text-secondary);
}
.stat-value {
font-weight: 600;
color: var(--text-primary);
}
/* === Dashboard Styles (existing) === */
.dashboard-header {
text-align: center;
margin-bottom: 32px;
padding: 32px 24px;
background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
border-radius: var(--radius-lg);
box-shadow: var(--shadow-lg);
position: relative;
overflow: hidden;
color: white;
}
.dashboard-header h1 {
font-size: 2rem;
font-weight: 700;
margin-bottom: 8px;
display: flex;
justify-content: center;
align-items: center;
gap: 12px;
position: relative;
z-index: 1;
}
.summary-cards {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
gap: 20px;
margin-bottom: 32px;
}
.card {
background: var(--bg-secondary);
border-radius: var(--radius);
box-shadow: var(--shadow);
padding: 24px;
transition: var(--transition);
display: flex;
align-items: center;
gap: 16px;
border: 1px solid var(--border);
}
.card:hover {
transform: translateY(-4px);
box-shadow: var(--shadow-lg);
}
.card-icon {
width: 64px;
height: 64px;
border-radius: 16px;
display: flex;
align-items: center;
justify-content: center;
font-size: 26px;
}
.total-revenue .card-icon { background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(99, 102, 241, 0.05)); color: var(--primary); }
.total-orders .card-icon { background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.05)); color: var(--success); }
.card-content h3 {
font-size: 0.9rem;
font-weight: 500;
color: var(--text-secondary);
margin-bottom: 4px;
}
.value {
font-size: 1.75rem;
font-weight: 700;
color: var(--text-primary);
}
.charts-container {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(520px, 1fr));
gap: 24px;
margin-bottom: 32px;
}
.chart-box {
background: var(--bg-secondary);
border-radius: var(--radius);
box-shadow: var(--shadow);
padding: 24px;
border: 1px solid var(--border);
}
.chart-box h2 {
font-size: 1.2rem;
font-weight: 600;
margin-bottom: 20px;
display: flex;
align-items: center;
gap: 10px;
padding-bottom: 16px;
border-bottom: 1px solid var(--border);
}
.chart-container {
min-height: 300px;
position: relative;
}
.data-table {
background: var(--bg-secondary);
border-radius: var(--radius);
box-shadow: var(--shadow);
padding: 24px;
margin-bottom: 32px;
border: 1px solid var(--border);
}
.data-table h2 {
font-size: 1.2rem;
font-weight: 600;
margin-bottom: 20px;
}
.table-wrapper {
overflow-x: auto;
}
table {
width: 100%;
border-collapse: collapse;
}
table th, table td {
padding: 12px 16px;
text-align: left;
border-bottom: 1px solid var(--border);
}
table th {
background: var(--bg-tertiary);
font-weight: 600;
}
.amount-cell {
font-weight: 600;
color: var(--primary);
}
@media (max-width: 1024px) {
.cutting-workspace {
grid-template-columns: 1fr;
}
.cutting-sidebar {
order: -1;
}
}
</style>
</head>
<body>
<div class="container">
<header class="dashboard-header">
<h1><i class="fas fa-chart-line"></i> –î–∞—à–±–æ—Ä–¥ + –¢–µ—Ö–ø—Ä–æ—Ü–µ—Å—Å—ã</h1>
</header>

<!-- Tabs -->
<div class="tabs">
<button class="tab active" onclick="switchTab('dashboard')">
<i class="fas fa-chart-pie"></i> –î–∞—à–±–æ—Ä–¥
</button>
<button class="tab" onclick="switchTab('cutting')">
<i class="fas fa-cut"></i> –¢–µ—Ö–ø—Ä–æ—Ü–µ—Å—Å—ã (–ö–∞—Ä—Ç–∞ —Ä–∞—Å–∫—Ä–æ—è)
</button>
</div>

<!-- Dashboard Tab -->
<div id="dashboard" class="tab-content active">
<div class="summary-cards" id="summaryCards">
<div class="card total-revenue">
<div class="card-icon"><i class="fas fa-coins"></i></div>
<div class="card-content">
<h3>–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞</h3>
<p class="value" id="totalRevenue">0 ‚ÇΩ</p>
</div>
</div>
<div class="card total-orders">
<div class="card-icon"><i class="fas fa-shopping-cart"></i></div>
<div class="card-content">
<h3>–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</h3>
<p class="value" id="totalOrders">0</p>
</div>
</div>
</div>
<div class="charts-container" id="chartsContainer">
<div class="chart-box">
<h2><i class="fas fa-chart-bar"></i> –í—ã—Ä—É—á–∫–∞ –ø–æ —Ç–∏–ø–∞–º —Ä–∞–±–æ—Ç</h2>
<div class="chart-container">
<canvas id="typeChart"></canvas>
</div>
</div>
</div>
<div class="data-table" id="dataTable">
<h2><i class="fas fa-table"></i> –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>‚Ññ</th><th>–ö–æ–¥</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>–¢–∏–ø</th><th>–°—É–º–º–∞</th></tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>
</div>
</div>

<!-- Cutting Map Tab -->
<div id="cutting" class="tab-content">
<div class="cutting-section">
<h2><i class="fas fa-cut"></i> –ö–∞—Ä—Ç–∞ —Ä–∞—Å–∫—Ä–æ—è –ª–∏—Å—Ç–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</h2>

<div class="cutting-controls">
<div class="control-group">
<label>–®–∏—Ä–∏–Ω–∞ –ø–æ–ª—è (–º–º)</label>
<input type="number" id="fieldWidth" value="2080" min="100" max="5000">
</div>
<div class="control-group">
<label>–í—ã—Å–æ—Ç–∞ –ø–æ–ª—è (–º–º)</label>
<input type="number" id="fieldHeight" value="2070" min="100" max="5000">
</div>
<div class="control-group">
<label>–®–∏—Ä–∏–Ω–∞ –¥–µ—Ç–∞–ª–∏ (–º–º)</label>
<input type="number" id="partWidth" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 500">
</div>
<div class="control-group">
<label>–í—ã—Å–æ—Ç–∞ –¥–µ—Ç–∞–ª–∏ (–º–º)</label>
<input type="number" id="partHeight" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 300">
</div>
<div class="control-group">
<label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
<input type="number" id="partQty" value="1" min="1">
</div>
<div class="control-group" style="display: flex; align-items: flex-end;">
<button class="add-part-btn" onclick="addPart()">
<i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å
</button>
</div>
</div>

<div class="cutting-workspace">
<div class="cutting-canvas-container">
<div class="cutting-canvas" id="cuttingCanvas"></div>
</div>

<div class="cutting-sidebar">
<div class="parts-list">
<h3><i class="fas fa-list"></i> –î–µ—Ç–∞–ª–∏</h3>
<div id="partsList"></div>
</div>

<div class="stats-panel">
<h3><i class="fas fa-chart-pie"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
<div class="stat-row">
<span class="stat-label">–ü–ª–æ—â–∞–¥—å –ø–æ–ª—è:</span>
<span class="stat-value" id="statFieldArea">0 –º¬≤</span>
</div>
<div class="stat-row">
<span class="stat-label">–ó–∞–Ω—è—Ç–æ:</span>
<span class="stat-value" id="statUsedArea">0 –º¬≤</span>
</div>
<div class="stat-row">
<span class="stat-label">–°–≤–æ–±–æ–¥–Ω–æ:</span>
<span class="stat-value" id="statFreeArea">0 –º¬≤</span>
</div>
<div class="stat-row">
<span class="stat-label">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</span>
<span class="stat-value" id="statUsage">0%</span>
</div>
<div class="stat-row">
<span class="stat-label">–í—Å–µ–≥–æ –¥–µ—Ç–∞–ª–µ–π:</span>
<span class="stat-value" id="statPartsCount">0</span>
</div>
</div>
</div>
</div>
</div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// === Tab Switching ===
function switchTab(tabName) {
document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
event.target.closest('.tab').classList.add('active');
document.getElementById(tabName).classList.add('active');
if (tabName === 'cutting') {
updateCuttingMap();
}
}

// === Cutting Map Logic ===
let parts = [];
let partIdCounter = 1;

function addPart() {
const width = parseInt(document.getElementById('partWidth').value);
const height = parseInt(document.getElementById('partHeight').value);
const qty = parseInt(document.getElementById('partQty').value);

if (!width || !height || width <= 0 || height <= 0) {
alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–µ—Ç–∞–ª–∏');
return;
}

const fieldWidth = parseInt(document.getElementById('fieldWidth').value);
const fieldHeight = parseInt(document.getElementById('fieldHeight').value);

for (let i = 0; i < qty; i++) {
parts.push({
id: partIdCounter++,
width: width,
height: height,
x: null,
y: null,
placed: false
});
}

updateCuttingMap();
document.getElementById('partWidth').value = '';
document.getElementById('partHeight').value = '';
document.getElementById('partQty').value = '1';
}

function removePart(id) {
parts = parts.filter(p => p.id !== id);
updateCuttingMap();
}

function updateCuttingMap() {
const fieldWidth = parseInt(document.getElementById('fieldWidth').value) || 2080;
const fieldHeight = parseInt(document.getElementById('fieldHeight').value) || 2070;
const canvas = document.getElementById('cuttingCanvas');
const container = canvas.parentElement;

// Calculate scale to fit canvas
const maxWidth = container.clientWidth - 40;
const maxHeight = 600;
const scaleX = maxWidth / fieldWidth;
const scaleY = maxHeight / fieldHeight;
const scale = Math.min(scaleX, scaleY, 1);

canvas.style.width = (fieldWidth * scale) + 'px';
canvas.style.height = (fieldHeight * scale) + 'px';
canvas.innerHTML = '';

// Place parts using simple algorithm
placeParts(fieldWidth, fieldHeight);

// Render parts
parts.forEach(part => {
if (part.placed) {
const el = document.createElement('div');
el.className = 'cutting-part';
el.style.left = (part.x * scale) + 'px';
el.style.top = (part.y * scale) + 'px';
el.style.width = (part.width * scale) + 'px';
el.style.height = (part.height * scale) + 'px';
el.innerHTML = `
<span class="part-number">#${part.id}</span>
<span class="part-dims">${part.width}√ó${part.height}</span>
`;
canvas.appendChild(el);
}
});

updateStats(fieldWidth, fieldHeight);
renderPartsList();
}

function placeParts(fieldWidth, fieldHeight) {
// Reset positions
parts.forEach(p => { p.x = null; p.y = null; p.placed = false; });

// Simple placement algorithm
const placed = [];
parts.forEach(part => {
let found = false;
for (let y = 0; y <= fieldHeight - part.height && !found; y += 10) {
for (let x = 0; x <= fieldWidth - part.width && !found; x += 10) {
if (!checkOverlap(x, y, part.width, part.height, placed)) {
part.x = x;
part.y = y;
part.placed = true;
placed.push({x, y, w: part.width, h: part.height});
found = true;
}
}
}
});
}

function checkOverlap(x, y, w, h, placed) {
for (let p of placed) {
if (!(x + w <= p.x || x >= p.x + p.w || y + h <= p.y || y >= p.y + p.h)) {
return true;
}
}
return false;
}

function updateStats(fieldWidth, fieldHeight) {
const fieldArea = fieldWidth * fieldHeight;
let usedArea = 0;
let placedCount = 0;

parts.forEach(p => {
if (p.placed) {
usedArea += p.width * p.height;
placedCount++;
}
});

const freeArea = fieldArea - usedArea;
const usage = ((usedArea / fieldArea) * 100).toFixed(1);

document.getElementById('statFieldArea').textContent = (fieldArea / 1000000).toFixed(2) + ' –º¬≤';
document.getElementById('statUsedArea').textContent = (usedArea / 1000000).toFixed(2) + ' –º¬≤';
document.getElementById('statFreeArea').textContent = (freeArea / 1000000).toFixed(2) + ' –º¬≤';
document.getElementById('statUsage').textContent = usage + '%';
document.getElementById('statPartsCount').textContent = placedCount + ' / ' + parts.length;
}

function renderPartsList() {
const list = document.getElementById('partsList');
list.innerHTML = '';

parts.forEach(part => {
const item = document.createElement('div');
item.className = 'part-item';
item.innerHTML = `
<div class="part-item-info">
<div class="part-item-dims">#${part.id}: ${part.width}√ó${part.height} –º–º</div>
<div class="part-item-qty">${part.placed ? '–†–∞–∑–º–µ—â–µ–Ω–∞' : '–ù–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è'}</div>
</div>
<div class="part-item-actions">
<button class="btn-small btn-danger" onclick="removePart(${part.id})" title="–£–¥–∞–ª–∏—Ç—å">
<i class="fas fa-trash"></i>
</button>
</div>
`;
list.appendChild(item);
});
}

// Update on field size change
document.getElementById('fieldWidth').addEventListener('change', updateCuttingMap);
document.getElementById('fieldHeight').addEventListener('change', updateCuttingMap);

// === Dashboard Logic (simplified) ===
function updateDashboard() {
document.getElementById('totalRevenue').textContent = '125 000 ‚ÇΩ';
document.getElementById('totalOrders').textContent = '42';
}

updateDashboard();
</script>
</body>
</html>
